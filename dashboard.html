<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- OG Meta Tags to improve the way the post looks when you share the page on LinkedIn, Facebook, Google+ -->
	<meta property="og:site_name" content="" /> <!-- website name -->
	<meta property="og:site" content="" /> <!-- website link -->
	<meta property="og:title" content=""/> <!-- title shown in the actual shared post -->
	<meta property="og:description" content="" /> <!-- description shown in the actual shared post -->
	<meta property="og:image" content="" /> <!-- image link, make sure it's jpg -->
	<meta property="og:url" content="" /> <!-- where do you want your post to link to -->
	<meta property="og:type" content="article" />

    <!-- Website Title -->
    <title>PhishSecure</title>
    
    <!-- Styles -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:500,700&display=swap&subset=latin-ext" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,600&display=swap&subset=latin-ext" rel="stylesheet">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/fontawesome-all.css" rel="stylesheet">
    <link href="css/swiper.css" rel="stylesheet">
	<link href="css/magnific-popup.css" rel="stylesheet">
	<link href="css/styles.css" rel="stylesheet">
	
	<!-- Favicon  -->
    <link rel="icon" href="images/logo.png">
    <style>
       table {
            font-size: clamp(6px, 2vw, 12px);
            width: 100%;
            border-collapse: collapse;
            margin: 5px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            border-radius: 5px;
            overflow: hidden;
            border: 1px solid black;
            outline: 1px solid black;
        }
        th, td {
            padding: 12px 15px;
            text-align: center;
        }
        table, th, td {
            border: 1px solid black;
            color:#000000;
        }
        th {
            font-size: clamp(6px, 2vw, 12px);
            background-color: #0073e6;
            color: white;
            text-transform: uppercase;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        tr:hover {
            background-color: #e0f7ff;
        }
        td {
            border-bottom: 1px solid #000000;
        }
        @media (max-width: 768px) {
            th, td {
                padding: 8px 10px;
            }
            table {
                font-size: clamp(8px, 2vw, 10px);
            }
        }
        
        @media (max-width: 280px) {
            th, td {
                padding: 6px 8px;
            }
            table {
                font-size: clamp(6px, 2vw, 8px);
            }
        }
    </style>
</head>
<body data-spy="scroll" data-target=".fixed-top">
    
    <!-- Preloader -->
	<div class="spinner-wrapper">
        <div class="spinner">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>
    </div>
    <!-- end of preloader -->
    

    <!-- Navbar -->
    <nav class="navbar navbar-expand-md navbar-dark navbar-custom fixed-top">
        <!-- Text Logo - Use this if you don't have a graphic logo -->
        <!-- <a class="navbar-brand logo-text page-scroll" href="index.html">Aria</a> -->

        <!-- Image Logo -->
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="username-link"  style="color:rgb(13, 164, 190)" > </a>
            </li>
            </ul>
            
            <!-- Mobile Menu Toggle Button -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-awesome fas fa-bars"></span>
                <span class="navbar-toggler-awesome fas fa-times"></span>
            </button>
            <!-- end of mobile menu toggle button -->
    
            <div class="collapse navbar-collapse" id="navbarsExampleDefault">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link page-scroll" href="dashboard.html">DASHBOARD</a>
                    </li>
                    <!-- Dropdown Menu -->          
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle page-scroll" href="course.html" id="navbarDropdown" role="button" aria-haspopup="true" aria-expanded="false">PHISHING</a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item page-scroll" href="course.html#intro"><span class="item-text">INTRODUCTION</span></a>
                            <div class="dropdown-items-divide-hr"></div>
                            <a class="dropdown-item page-scroll" href="course.html#history"><span class="item-text">HISTORY</span></a>
                            <div class="dropdown-items-divide-hr"></div>
                            <a class="dropdown-item page-scroll" href="course.html#types"><span class="item-text">TYPES</span></a>
                            <div class="dropdown-items-divide-hr"></div>
                            <a class="dropdown-item page-scroll" href="course.html#preventions"><span class="item-text">PREVENTIONS</span></a>
                            <div class="dropdown-items-divide-hr"></div>
                            <a class="dropdown-item page-scroll" href="course.html#footer"><span class="item-text">CREDIT</span></a>
                            <div class="dropdown-items-divide-hr"></div>
                        </div>
                    </li>
                    <!-- end of dropdown menu -->
                    <li class="nav-item">
                        <a class="nav-link page-scroll" href="quizzes.html">QUIZZES</a>
                    </li>
    
                    <li class="nav-item">
                        <a class="nav-link page-scroll" href="profile.html">PROFILE</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link page-scroll" href="leaderboard.html">LEADERBOARD</a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link page-scroll" href="login.html" id="logout-link">LOGOUT</a>
                </li>
                </ul>
            </div>
        </nav> <!-- end of navbar -->
        <!-- end of navbar -->
        <br><br><br><br>
        <div class="leaderbody">
           <!-- Dashboard Container -->
    <div class="dashboard-container">
        
        <!-- Top Section -->
        <div class="top-section">
            <div class="tophead-box">
                <h2>DASHBOARD</h2>
            </div>
        </div>
        
        <!-- Left Part -->
        <div class="left-part">
            <div class="profile-box">
                <a href="editProfile.html">
                    <img id="profileImage" src="images/defaultAvatar.jpg" class="dashavatar" alt="Profile Picture">
                </a>
                <p class="dashusername"></p>
            </div>

            <div class="userprofile-box">
                <a href="profile.html">
                    <img src="images/profileDashboard.png" alt="Profile Image">
                    <h6>Go to Profile</h6>
                </a>
            </div>

            <div class="progress-box">
                <div class="card">
                    <div class="box">
                        <h6>Course Status</h6>
                        <div class="percent">
                            <svg>
                                <circle cx="70" cy="70" r="70"></circle>
                                <circle class="progress-circle" cx="70" cy="70" r="70"></circle>
                            </svg>
                            <div class="num">
                                <h2><span class="course-progress">0</span><span>%</span></h2>
                            </div>
                        </div>
                        <h2 class="text">Progress</h2>
                    </div>
                </div>
            </div>

        </div>
        
        <!-- Middle Part -->
        <div class="middle-part">
            <div class="instruction-box">
                <h2>PhishSecure Instruction</h2>
                <table>
                    <tr>
                        <th>Step</th>
                        <th>Course Section</th>
                        <th>Progress</th>
                        <th>Quiz Level</th>
                        <th>Pass Points</th>
                        <th>Badge Points</th>
                        <th>Action on Fail</th>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Introduction & History</td>
                        <td>40%</td>
                        <td>Beginner</td>
                        <td>50+ (Unlock Next Level)</td>
                        <td>80+</td>
                        <td>Repeat Quiz</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Phishing Types</td>
                        <td>20%</td>
                        <td>Intermediate</td>
                        <td>50+ (Unlock Next Level)</td>
                        <td>80+</td>
                        <td>Repeat Quiz</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Type Prevention & General Prevention</td>
                        <td>40%</td>
                        <td>Expert</td>
                        <td>50+</td>
                        <td>80+</td>
                        <td>Repeat Quiz</td>
                    </tr>
                </table>
            </div>

            <div class="quiz-box">
                <ul class="list-group list-group-flush">
                    <li class="no-bullet">
                        <h6 style="text-align: center;">Level Status</h6>
                      </li>
                  <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                    <h6 class="mb-0">Beginner</h6>
                    <span class="text-secondary"><a class="beginnerstatus"></a></span>
                  </li>
                  <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                    <h6 class="mb-0">Intermediate</h6>
                    <span class="text-secondary"><a class="intermediatestatus"></a></span>
                  </li>
                  <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                    <h6 class="mb-0">Expert</h6>
                    <span class="text-secondary"><a class="expertstatus"></a></span>
                  </li>
                </ul>
              </div>
        </div>
        
        <!-- Right Part -->
        <div class="right-part">
        <div class="course-box">
            <a href="course.html">
                <img src="images/courseDashboard.png" alt="Course Image">
                <h6>Go to Course</h6>
            </a>
        </div>
        <div class="quiz-box">
            <a href="quizzes.html">
                <img src="images/quizDashboard.png" alt="Quiz Image">
                <h6>Go to Quizzes</h6>
            </a>
        </div>
        <div class="leaderboard-box">
            <a href="leaderboard.html">
                <img src="images/leaderboardDashboard.png" alt="Leaderboard Image">
                <h6>Go to Leaderboard</h6>
            </a>
        </div>
    </div>
    </div>
</div>
    <!-- Footer -->
    <div id="footer" class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <div class="text-container about">
                        <h4>Credit</h4>
                        <p class="white">Information from this phishing course was sourced from several websites. We acknowledge the valuable insights and resources provided by these sources in the development of this course. Special thanks for their contributions go to: </p>
                    </div> <!-- end of text-container -->
                </div> <!-- end of col -->
                <div class="col-md-2">
                    <div class="text-container">
                        <h4>Links</h4>
                        <ul class="list-unstyled li-space-lg white">
                            <li>
                                <a class="white" href="https://www.phishing.org/history-of-phishing">www.phishing.org</a>
                            </li>
                            <li>
                                <a class="white" href="https://us.norton.com/blog/online-scams/types-of-phishing">us.norton.com</a>
                            </li>
                            <li>
                                <a class="white" href="https://www.knowbe4.com/phishing#4">www.knowbe4.com</a>
                            </li>
                            <li>
                                <a class="white" href="https://www.slideshare.net/AniketPandit18/phishing-attack-seminar-presentation">www.slideshare.net</a>
                            </li>
                        </ul>
                    </div> <!-- end of text-container -->
                </div> <!-- end of col -->
            </div> <!-- end of row -->
        </div> <!-- end of container -->
    </div> <!-- end of footer -->  
    <!-- end of footer -->
    
    	
    <!-- Scripts -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getDatabase, ref, onValue, update } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
    
    // Your web app's Firebase configuration
    const firebaseConfig = {
  apiKey: "AIzaSyDPRVp-gibvlZ5VIUl4ZfBxBcOpA5fjatc",
  authDomain: "phish-38fef.firebaseapp.com",
  databaseURL: "https://phish-38fef-default-rtdb.firebaseio.com/",
  projectId: "phish-38fef",
  storageBucket: "phish-38fef.appspot.com",
  messagingSenderId: "206566350425",
  appId: "1:206566350425:web:2daec834375550dba55b48"
};
    
         // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase();
    const auth = getAuth();
    const showusername = document.querySelector('.dashusername');
    const beginnerstatus = document.querySelector('.beginnerstatus');
    const intermediatestatus = document.querySelector('.intermediatestatus');
    const expertstatus = document.querySelector('.expertstatus');

    // Check if the user is authenticated
onAuthStateChanged(auth, (user) => {
    if (user) {
        // User is signed in
        const userId = user.uid;
        console.log("User is logged in:", userId);

        // Fetch user information from the database using the current user's ID
        const userRef = ref(database, 'users/' + userId);
        onValue(userRef, (snapshot) => {
            const userData = snapshot.val();
            showUserInfo(userData);
            beginnerStatus(userData);
            intermediateStatus(userData);
            expertStatus(userData);
            updateCourseProgress(userData);
            document.getElementById('profileImage').src = getProfileIconSrc(userData.profileIcon);

        });
    } else {
        console.log("No user is currently logged in");
    }
});

function showUserInfo(userData) {
    // Display user information on the page
    if (userData) {
        showusername.textContent =userData.username; // Display username in the navigation
    } else {
        console.log('User data not available');
    }
}

function getProfileIconSrc(iconName) {
    switch(iconName) {
        case "Icon 1":
            return "images/team-1.png";
        case "Icon 2":
            return "images/team-2.png";
        case "Icon 3":
            return "images/team-3.png";
        default:
            // Handle the case if the iconName is not recognized
            return "images/defaultAvatar.jpg"; // You might want to return a default image path or handle this case differently based on your requirements
    }
}

function beginnerStatus(userData) {
    // Display user information on the page
    if (userData && userData.points && userData.points.BeginnerLevel >= 50) {
        beginnerstatus.textContent = 'Completed'; // Display Status complete beginner in the user menu
    } else {
        beginnerstatus.textContent = 'Incomplete'; 
        console.log('User data or BeginnerLevel points not available');
    }
}

function intermediateStatus(userData) {
    // Display user information on the page
    if (userData && userData.points && userData.points.IntermediateLevel >= 50) {
        intermediatestatus.textContent = 'Completed'; // Display status intermediate in the user menu
    } else {
        intermediatestatus.textContent = 'Incomplete'; 
        console.log('User data or IntermediateLevel points not available');
    }
}

function expertStatus(userData) {
    // Display user information on the page
    if (userData && userData.points && userData.points.ExpertLevel >= 50) {
        expertstatus.textContent = 'Completed'; // Display points expert in the user menu
    } else {
        expertstatus.textContent = 'Incomplete'; // Display 0 if user data or expert points are not available
        console.log('User data or ExpertLevel points not available');
    }
}

    // Logout function
    function logout() {
            auth.signOut().then(() => {
                window.location.href = 'SignInOut.html'; // Redirect to login page
            }).catch((error) => {
                console.error('Sign Out Error', error);
            });
        }

        // Attach logout function to the logout link
        document.getElementById('logout-link').addEventListener('click', function(event) {
            event.preventDefault();
            logout();
        });

// Function to update the progress circle with course progress
function updateCourseProgress(userData) {
    if (userData && userData.progress && userData.progress.courseProgress) {
        const courseProgress = userData.progress.courseProgress;
        const progressCircle = document.querySelector('.progress-circle');
        const progressText = document.querySelector('.course-progress');
        
        // Update circle radius based on progress
        progressCircle.style.strokeDasharray = `${courseProgress}, 100`;
        // Update progress text
        progressText.textContent = courseProgress;
    } else {
        console.log("User data or course progress not available");
    }
}

    </script>
    <script src="js/jquery.min.js"></script> <!-- jQuery for Bootstrap's JavaScript plugins -->
    <script src="js/popper.min.js"></script> <!-- Popper tooltip library for Bootstrap -->
    <script src="js/bootstrap.min.js"></script> <!-- Bootstrap framework -->
    <script src="js/jquery.easing.min.js"></script> <!-- jQuery Easing for smooth scrolling between anchors -->
    <script src="js/swiper.min.js"></script> <!-- Swiper for image and text sliders -->
    <script src="js/jquery.magnific-popup.js"></script> <!-- Magnific Popup for lightboxes -->
    <script src="js/morphext.min.js"></script> <!-- Morphtext rotating text in the header -->
    <script src="js/isotope.pkgd.min.js"></script> <!-- Isotope for filter -->
    <script src="js/validator.min.js"></script> <!-- Validator.js - Bootstrap plugin that validates forms -->
    <script src="js/scripts.js"></script> <!-- Custom scripts -->

</body>
</html>